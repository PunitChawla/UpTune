"use strict";(()=>{var e={};e.id=659,e.ids=[659],e.modules={72934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},39491:e=>{e.exports=require("assert")},14300:e=>{e.exports=require("buffer")},6113:e=>{e.exports=require("crypto")},82361:e=>{e.exports=require("events")},13685:e=>{e.exports=require("http")},95687:e=>{e.exports=require("https")},63477:e=>{e.exports=require("querystring")},57310:e=>{e.exports=require("url")},73837:e=>{e.exports=require("util")},59796:e=>{e.exports=require("zlib")},88813:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>v,patchFetch:()=>h,requestAsyncStorage:()=>l,routeModule:()=>x,serverHooks:()=>g,staticGenerationAsyncStorage:()=>q});var s={};r.r(s),r.d(s,{POST:()=>m});var o=r(49303),n=r(88716),i=r(60670),a=r(86058),u=r(75571),p=r(87070),d=r(7410);let c=d.z.object({streamId:d.z.string()});async function m(e){let t=await (0,u.getServerSession)(),r=await a.m.user.findFirst({where:{email:t?.user?.email??""}});if(!r)return p.NextResponse.json({msg:"Unauthenticated"},{status:403});try{let t=c.parse(await e.json());if(!t)return p.NextResponse.json({msg:"incorrect input"},{status:500});return await a.m.upvote.delete({where:{userId_streamId:{userId:r.id,streamId:t.streamId}}}),p.NextResponse.json({mes:"Done!"})}catch(e){return p.NextResponse.json({msg:"error while upvoting ",error:e},{status:500})}}let x=new o.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/streams/downvote/route",pathname:"/api/streams/downvote",filename:"route",bundlePath:"app/api/streams/downvote/route"},resolvedPagePath:"D:\\ProjectBycohort\\MelodyMixer\\app\\app\\api\\streams\\downvote\\route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:l,staticGenerationAsyncStorage:q,serverHooks:g}=x,v="/api/streams/downvote/route";function h(){return(0,i.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:q})}},86058:(e,t,r)=>{r.d(t,{m:()=>s});let s=new(require("@prisma/client")).PrismaClient}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[948,209,773,410],()=>r(88813));module.exports=s})();