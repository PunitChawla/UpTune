"use strict";(()=>{var e={};e.id=817,e.ids=[817],e.modules={72934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},39491:e=>{e.exports=require("assert")},14300:e=>{e.exports=require("buffer")},6113:e=>{e.exports=require("crypto")},82361:e=>{e.exports=require("events")},13685:e=>{e.exports=require("http")},95687:e=>{e.exports=require("https")},63477:e=>{e.exports=require("querystring")},57310:e=>{e.exports=require("url")},73837:e=>{e.exports=require("util")},59796:e=>{e.exports=require("zlib")},18508:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>v,patchFetch:()=>h,requestAsyncStorage:()=>m,routeModule:()=>d,serverHooks:()=>g,staticGenerationAsyncStorage:()=>q});var s={};r.r(s),r.d(s,{POST:()=>x});var o=r(49303),i=r(88716),a=r(60670),n=r(86058),u=r(75571),p=r(87070),c=r(7410);let l=c.z.object({streamId:c.z.string()});async function x(e){let t=await (0,u.getServerSession)(),r=await n.m.user.findFirst({where:{email:t?.user?.email??""}});if(!r)return p.NextResponse.json({msg:"Unauthenticated"},{status:403});try{let t=l.parse(await e.json());if(!t)return p.NextResponse.json({msg:"incorrect input"},{status:500});return console.log(t),await n.m.upvote.create({data:{userId:r.id,streamId:t.streamId}}),p.NextResponse.json({mes:"Done!"})}catch(e){return p.NextResponse.json({msg:"error while upvoting ",error:e},{status:500})}}let d=new o.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/streams/upvote/route",pathname:"/api/streams/upvote",filename:"route",bundlePath:"app/api/streams/upvote/route"},resolvedPagePath:"D:\\ProjectBycohort\\MelodyMixer\\app\\app\\api\\streams\\upvote\\route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:m,staticGenerationAsyncStorage:q,serverHooks:g}=d,v="/api/streams/upvote/route";function h(){return(0,a.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:q})}},86058:(e,t,r)=>{r.d(t,{m:()=>s});let s=new(require("@prisma/client")).PrismaClient}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[948,209,773,410],()=>r(18508));module.exports=s})();