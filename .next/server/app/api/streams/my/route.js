"use strict";(()=>{var e={};e.id=640,e.ids=[640],e.modules={72934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},39491:e=>{e.exports=require("assert")},14300:e=>{e.exports=require("buffer")},6113:e=>{e.exports=require("crypto")},82361:e=>{e.exports=require("events")},13685:e=>{e.exports=require("http")},95687:e=>{e.exports=require("https")},63477:e=>{e.exports=require("querystring")},57310:e=>{e.exports=require("url")},73837:e=>{e.exports=require("util")},59796:e=>{e.exports=require("zlib")},29146:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>q,patchFetch:()=>v,requestAsyncStorage:()=>c,routeModule:()=>m,serverHooks:()=>x,staticGenerationAsyncStorage:()=>d});var s={};r.r(s),r.d(s,{GET:()=>l});var i=r(49303),o=r(88716),a=r(60670),n=r(86058),u=r(75571),p=r(87070);async function l(e){let t=await (0,u.getServerSession)(),r=await n.m.user.findFirst({where:{email:t?.user?.email??""}});if(console.log(t?.user?.email),!r)return p.NextResponse.json({msg:"Unauthenticate"},{status:403});let s=await n.m.stream.findMany({where:{userId:r.id},include:{_count:{select:{upvote:!0}},upvote:{where:{userId:r.id}}}});return p.NextResponse.json({streams:s.map(({_count:e,...t})=>({...t,upvotes:e.upvote,haveUpvote:!!t.upvote.length}))})}let m=new i.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/streams/my/route",pathname:"/api/streams/my",filename:"route",bundlePath:"app/api/streams/my/route"},resolvedPagePath:"D:\\ProjectBycohort\\MelodyMixer\\app\\app\\api\\streams\\my\\route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:c,staticGenerationAsyncStorage:d,serverHooks:x}=m,q="/api/streams/my/route";function v(){return(0,a.patchFetch)({serverHooks:x,staticGenerationAsyncStorage:d})}},86058:(e,t,r)=>{r.d(t,{m:()=>s});let s=new(require("@prisma/client")).PrismaClient}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[948,209,773],()=>r(29146));module.exports=s})();